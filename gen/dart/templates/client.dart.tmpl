{{define "client"}}

{{if .Services}}
// ***********************************************************************
// WEBRPC-DART SERVICE CLIENTS.
// ***********************************************************************

String _removeSlash(String host) => host.endsWith('/')
? host.replaceRange(host.length - 1, host.length, '')
: host;

{{range .Services}}
class {{.Name}} {
  final http.Client client;
  final String host;
  final String path;
  RpcLogger _log; 
  String _srvcPath = '/rpc/{{.Name}}/';
  {{.Name}}({@required this.host, 
             @required this.client,
             RpcLogger logger}) {
      _srvcPath = '${_removeSlash(host)}/rpc/{{.Name}}/';
  }  
  {{range .Methods}}

  {{end}} {{/* end of range .Methods */}}

}
{{end}} {{/* end of range .Services */}}


{{end}} {{/* end of if .Services */}}
{{end}} {{/* end of top level Define */}}
